<!doctype html>
<html>
  <head>
      <meta charset="utf-8">
  <title>Notation algo</title>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.4.0/coffee-script.min.js"></script>
  <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
  <style>
    #pysrc { background: black; color: lightgreen; width: 24em; height: 12em; font-family: monospace; }
    #pydest { background: lightyellow; color: darkblue; width: 24em; height: 12em; font-family: cursive; }
    #absrc { background: black; color: lightyellow; width: 24em; height: 16em; font-family: monospace; }
    #abdest { background: lightcyan; color: darkred; width: 24em; height: 16em; font-family: cursive; }
  </style>
  </head>  
    
    <body>
        <script>

        </script>
        
        <h1>Utilitaires de conversion</h1>
<h2>Depuis Python</h2>

<table>
	<tr><td>Coller ci-dessous le script Python, </td><td>puis cliquer ci-dessous</td><td>... et corriger ci-dessous</td></tr>
	<tr>
		<td><textarea id="pysrc">u = 65
while u >= 2:
    if u%2 == 0:
       u = u/2
    else:
       u = 3*u+1
    print(u) </textarea></td>
		<td><button id="py2algo">→ convertir →</button></td>
		<td><textarea id="pydest">u ← 65
tant que u ≥ 2
    si u%2 = 0
        u ← u/2
    sinon
        u ← 3×u+1
    afficher u</textarea></td>
	</tr>
	<tr><td></td><td></td><td>Ensuite copier le texte ci-dessus et le coller dans le traitement de texte</td></tr>
</table>

<script type="text/coffeescript">
python2algo = (source) ->
    algo = source.replace /\=/g, "←"
    algo = algo.replace /←←/g, "="
    algo = algo.replace />←/g, "≥"
    algo = algo.replace /<←/g, "≤"
    algo = algo.replace /!←/g, "≠"
    algo = algo.replace /:/g, ""
    algo = algo.replace /elif/g, "sinon, si "
    algo = algo.replace /if\s/g, "si "
    algo = algo.replace /else/g, "sinon "
    algo = algo.replace /for\s/g, "pour "
    algo = algo.replace /\snot\s/g, " on n'a pas "
    algo = algo.replace /\sand\s/g, " et "
    algo = algo.replace /\sor\s/g, " ou "
    algo = algo.replace /while\s/g, "Tant que "
    algo = algo.replace /\sin\srange\(([\w|\+\-\*\/]+),([\w|\+\-\*\/]+)\)/g, " allant de $1 à $2-1"
    algo = algo.replace /\sin\srange\(([\w|\+\-\*\/]+)\)/g, " allant de 0 à $1-1"
    algo = algo.replace /print/g, "afficher "
    algo = algo.replace /\sin\s/g, " dans "
    algo = algo.replace /\*\*2/g, "²"
    algo = algo.replace /\*\*3/g, "³"
    algo = algo.replace /float\('inf'\)/g, "+∞"
    algo = algo.replace /float\('-inf'\)/g, "-∞"
    algo = algo.replace /(\w+)\s*\+←/g, "augmenter $1 de "
    algo = algo.replace /(\w+)\s*\-←/g, "diminuer $1 de "
    algo = algo.replace /(\w+)\s*\*←/g, "multiplier $1 par "
    algo = algo.replace /(\w+)\s*\*\*←/g, "élever $1 à la puissance "
    algo = algo.replace /(\w+)\s*\/←/g, "diviser $1 par "
    algo = algo.replace /\*/g, "×"
    algo = algo.replace /sqrt/g, "√"
    algo = algo.replace /%\s*2\s*=\s*0/g, " est pair"
#    algo = algo.replace /def\s/g, "définir la fonction "
    algo = algo.replace /def\s/g, "algorithme "
    algo = algo.replace /return\s/g, "renvoyer "
    algo = algo.replace /input/g, "entrer"
    algo = algo.replace /choice/g, "prendre un élément au hasard dans"
    algo = algo.replace /sample/g, "tirage sans remise"
    algo = algo.replace /shuffle/g, "mélanger"
    algo = algo.replace /randint/g, "entier au hasard"
    algo = algo.replace /uniform/g, "variable aléatoire uniforme"
    algo = algo.replace /expovariate/g, "variable aléatoire exponentielle de paramètre"
    algo = algo.replace /gauss/g, "variable aléatoire normale de paramètres"
    algo = algo.replace /left/g, "tourner vers la gauche de"
    algo = algo.replace /right/g, "tourner vers la droite de"
    algo = algo.replace /forward/g, "avancer de"
    algo = algo.replace /backward/g, "reculer de"
    algo = algo.replace /penup\(\)/g, "lever le crayon"
    algo = algo.replace /pendown\(\)/g, "baisser le crayon"
    algo = algo.replace /reset\(\)/g, "initialiser le graphisme tortue"
    algo = algo.replace /setposition/g, "téléporter la tortue vers"
    algo = algo.replace /write/g, "écrire"
    algo = algo.replace /True/g, "vrai"
    algo = algo.replace /False/g, "faux"
    algo = algo.replace /××/g, "^"
    algo = algo.replace /(\w+)\.count\((\w+)\)/g, "nombre d'occurences de $2 dans $1"
    algo = algo.replace /(\w+)\.append\((\w+)\)/g, "insérer $2 à la fin de $1"
    algo = algo.replace /(\w+)\.issubset\((\w+)\)/g, "$1 est inclus dans $2"
    algo = algo.replace /(\w+)\.add\((\w+)\)/g, "ajouter $2 à l'ensemble $1"
    algo = algo.replace /(\w+)\.union\((\w+)\)/g, "$1 ∪ $2"
    algo = algo.replace /(\w+)\.intersection\((\w+)\)/g, "$1 ∩ $2"
    algo = algo.replace /all\((\w+)\)/g, "∀x, $1(x)"
    algo = algo.replace /any\((\w+)\)/g, "∃x, $1(x)"
    algo

$("#py2algo").on 'click', ->
    $("#pydest").val python2algo($("#pysrc").val())

</script>

<hr>

<h2>Depuis Algobox</h2>

<table>
	<tr>
		<td>Coller ci-dessous l'algobox, </td>
		<td>puis cliquer ci-dessous</td>
		<td>... et corriger le résultat ci-dessous</td>
	</tr>
	<tr>
		<td><textarea id="absrc">Variables :
  n de type entier
  u de type réel
  S de type réel
Initialisation :
  u prend la valeur 200
  S PREND_LA_VALEUR 0
  Entrer n
Traitement :
  Pour k allant de 1 à n
    u prend la valeur u*1.03
    affecter à S la valeur S+u
  fin Pour
Sortie :
  Afficher S    
</textarea></td>
<td><button id="ab2algo">→ convertir →</button></td>
<td><textarea id="abdest">u ← 200
s ← 0
 
pour k allant de 1 à n
    u ← u*1.03
    s ← s+u
fin pour 
</textarea></td>
	</tr>
</table>

<script type="text/coffeescript">
algobox2algo = (source) ->
    algo = source.replace /prend[\s|_]+la[\s|_]+valeur[\s|_]+/gi, "← "
    algo = algo.replace /^\d+\s+/gm, ""
    algo = algo.replace /\:/g, ""
    algo = algo.replace /^[\s\S]+debut[\s|_]algorithme/gi, ""
    algo = algo.replace /variable[^]+initialisation/gim, ""
    algo = algo.replace /initialisation/gi, ""
    algo = algo.replace /traitement/gi, ""
    algo = algo.replace /^\s*entr[^\n]+/gim, ""
    algo = algo.replace /\s*sortie/gi, ""
    algo = algo.replace /^\s*affiche[^\n]+/gim, ""
    algo = algo.replace /^lire[^\n]+/gim, ""
    algo = algo.replace /^fin_algo[^\n]+/gim, ""
    algo = algo.replace /!=/g, "≠"
    algo = algo.replace /<=/g, "≤"
    algo = algo.replace />=/g, "≥"
#    algo = algo.replace /^\*/gim, ""
    algo = algo.replace /^\n/gim, ""
    algo = algo.replace /la[\s|_]+valeur[\s|_]+/gi, "← "
    algo = algo.replace /affecter[\s|_]+à/gi, ""
    algo = algo.toLowerCase()
    algo

$("#ab2algo").on 'click', ->
    $("#abdest").val algobox2algo($("#absrc").val())


</script>

</body></html>
